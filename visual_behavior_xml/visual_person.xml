<?xml version="1.0"?>
<root main_tree_to_execute="BehaviorTree">
    <!-- ////////// -->
    <BehaviorTree ID="BehaviorTree">
        <ReactiveSequence>
            <Fallback>
                <RetryUntilSuccesful num_attempts="5">
                    <Fallback>
                        <Condition ID="DetectPerson" turn_direction="{turn_direction}" turn_velocity="{turn_velocity}"/>
                        <Inverter>
                            <Action ID="Turn" turn_direction="{turn_direction}" turn_velocity="{turn_velocity}"/>
                        </Inverter>
                    </Fallback>
                </RetryUntilSuccesful>
                <ReactiveFallback>
                    <Condition ID="DetectPerson" turn_direction="{turn_direction}" turn_velocity="{turn_velocity}"/>
                    <Action ID="MakeSound"/>
                </ReactiveFallback>
            </Fallback>
            <Inverter>
                <ReactiveFallback>
                    <Inverter>
                        <Condition ID="DetectPersonDist" foward_direction="{foward_direction}" foward_velocity="{foward_velocity}"/>
                    </Inverter>
                    <Action ID="Foward" foward_direction="{foward_direction}" foward_velocity="{foward_velocity}"/>
                </ReactiveFallback>
            </Inverter>
        </ReactiveSequence>
    </BehaviorTree>
    <!-- ////////// -->
    <TreeNodesModel>
        <Condition ID="DetectPerson">
            <output_port name="turn_direction">devuelve hacia que direccion girar</output_port>
            <output_port name="turn_velocity">velocidad a la que girara</output_port>
        </Condition>
        <Condition ID="DetectPersonDist">
            <output_port name="foward_direction">direccion a la que caminara, siendo hacia delante o hacia atras</output_port>
            <output_port name="foward_velocity">velocidad a la que caminara</output_port>
        </Condition>
        <Action ID="Foward">
            <input_port name="foward_direction">direccion a la que caminara, siendo hacia delante o hacia atras</input_port>
            <input_port name="foward_velocity">velocidad a la que caminara</input_port>
        </Action>
        <Action ID="MakeSound"/>
        <Action ID="Turn">
            <input_port name="turn_direction">direccion a la que girara</input_port>
            <input_port name="turn_velocity">velocidad a la que girara</input_port>
        </Action>
    </TreeNodesModel>
    <!-- ////////// -->
</root>

